const navToggle = document.querySelector(".toggle");
const navMenu = document.querySelector(".menu");

navToggle.addEventListener("click", () => {
  const isActive = navMenu.classList.toggle("active");
  navToggle.querySelector("a").innerHTML = isActive
    ? "<svg><use xlink:href='#close' /></svg>"
    : "<svg><use xlink:href='#menu' /></svg>";
});

for (const item of document.querySelectorAll(".item")) {
  if (item.querySelector(".submenu")) {
    item.addEventListener("click", function() {
      const currentActive = navMenu.querySelector(".submenu-active");
      if (currentActive && currentActive !== this) {
        currentActive.classList.remove("submenu-active");
      }
      this.classList.toggle("submenu-active");
    });
  }
  item.addEventListener("keypress", function() {
    this.classList.toggle("submenu-active");
  });
}

document.addEventListener("click", (e) => {
  if (!navMenu.contains(e.target)) {
    const active = navMenu.querySelector(".submenu-active");
    if (active) active.classList.remove("submenu-active");
  }
});
